# ğŸ›¡ï¸ ì‹œìŠ¤í…œ ë³´ì•ˆ ìë™í™” í”„ë¡œì íŠ¸ - ì„¤ì¹˜ ë° ì‹¤í–‰ ê°€ì´ë“œ

## ğŸ“ í”„ë¡œì íŠ¸ ë° ë””ë ‰í† ë¦¬ êµ¬ì¡°

í”„ë¡œì íŠ¸ ë£¨íŠ¸: `~/security_project/`

```bash
~/security_project/
â”œâ”€â”€ .venv/                  # íŒŒì´ì¬ ê°€ìƒí™˜ê²½ (Streamlit ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ë…ë¦½ì„± ìœ ì§€)
â”œâ”€â”€ ansible.cfg             # ì•¤ì„œë¸” ì„¤ì • (Pipelining í™œì„±í™”, scp_if_ssh=True ë“± ìµœì í™”)
â”œâ”€â”€ dashboard.py            # [UI] Streamlit ê¸°ë°˜ ëŒ€ì‹œë³´ë“œ ë° ì‹œê°í™” ë¡œì§
â”œâ”€â”€ hosts                   # íƒ€ê²Ÿ ì„œë²„ (Rocky 9, 10 ë“±) ë° DB ê·¸ë£¹ ê´€ë¦¬ ì¸ë²¤í† ë¦¬
â”œâ”€â”€ run_audit.yml           # [ìë™í™”] ì „ ì„œë²„ ëŒ€ìƒ ë³´ì•ˆ ì§„ë‹¨ ìŠ¤í¬ë¦½íŠ¸ ë°°í¬ ë° ê²°ê³¼ ìˆ˜ì§‘
â”œâ”€â”€ run_fix.yml             # [ìë™í™”] ì·¨ì•½ í•­ëª©ì— ëŒ€í•œ ìë™ ì¡°ì¹˜ ì‹¤í–‰ í”Œë ˆì´ë¶
â”œâ”€â”€ results/                # [JSON] ì„œë²„ë³„/í•­ëª©ë³„ JSON ì ê²€ ê²°ê³¼ ë¡œê·¸ ì €ì¥ì†Œ
â”œâ”€â”€ fix_logs/               # [JSON] ì¡°ì¹˜ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ê²°ê³¼ ë° ì„±ê³µ/ì‹¤íŒ¨ ë¡œê·¸ ê¸°ë¡
â””â”€â”€ scripts/                # ì‹¤ì œ ì ê²€ ë° ì¡°ì¹˜ê°€ ìˆ˜í–‰ë˜ëŠ” ì‰˜ ìŠ¤í¬ë¦½íŠ¸ ì €ì¥ì†Œ
    â””â”€â”€ unix/               # Unix ì„œë²„ ì·¨ì•½ì  ì§„ë‹¨
        â”œâ”€â”€ 1_account/      # 1. ê³„ì • ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸ (U01~U13)
        â”œâ”€â”€ 2_directory/    # 2. íŒŒì¼ ë° ë””ë ‰í„°ë¦¬ ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸ (U14~U33)
        â”œâ”€â”€ 3_service/      # 3. ì„œë¹„ìŠ¤ ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸ (U34~U63)
        â”œâ”€â”€ 4_patch/        # 4. íŒ¨ì¹˜ ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸ (U64)
        â”œâ”€â”€ 5_logs/         # 5. ë¡œê·¸ ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸ (U65~U67)
        â”œâ”€â”€ 6_db/           # DBMSë³„ ì„œë²„ ì·¨ì•½ì  ì§„ë‹¨
        â”‚   â”œâ”€â”€ mysql/      # [Rocky 9 ê¸°ë°˜] MySQL ë³´ì•ˆ ê´€ë¦¬
        â”‚   â””â”€â”€ postgresql/ # [Rocky 10 ê¸°ë°˜] PostgreSQL ë³´ì•ˆ ê´€ë¦¬
        â””â”€â”€ 7_patch/        # [OSë³„] Rocky 9 vs 10 ë²„ì „ë³„ ì»¤ë„ ë° ë³´ì•ˆ íŒ¨ì¹˜ ê´€ë¦¬
```

---

## ğŸš€ Step 1: ì‚¬ì „ ì„¤ì • (Ubuntu)

### 1.1 ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€ ì„¤ì¹˜
```bash
sudo apt update && sudo apt install -y ansible python3-venv sshpass
```

### 1.2 Python ê°€ìƒí™˜ê²½ ìƒì„± ë° íŒ¨í‚¤ì§€ ì„¤ì¹˜
**[ì‹¤í–‰ ìœ„ì¹˜: ğŸ“‚`~/security_project`]**

```bash
cd ~/security_project
# ê°€ìƒí™˜ê²½ ìƒì„±
python3 -m venv ~/security_project/.venv

# ê°€ìƒí™˜ê²½ í™œì„±í™”
source ~/security_project/.venv/bin/activate

# Python íŒ¨í‚¤ì§€ ì„¤ì¹˜
pip install streamlit pandas plotly xlsxwriter
```

> âš ï¸ **ì¤‘ìš”**: ëŒ€ì‹œë³´ë“œ ì‹¤í–‰ ì „ í•­ìƒ `source ~/security_project/.venv/bin/activate` ì‹¤í–‰ í•„ìš”!

### 1.3 SSH í‚¤ ì„¤ì •
**[ì‹¤í–‰ ìœ„ì¹˜: ğŸ  í™ˆ ë””ë ‰í„°ë¦¬ (`~`)]**
```bash
cd ~
ssh-keygen -t rsa -b 4096
ssh-copy-id <ê³„ì •ëª…>@<Rocky_IP>
```

---

## ğŸš€ Step 2: ì¸ë²¤í† ë¦¬ ì„¤ì •

```bash
nano ~/security_project/hosts
```

```ini
```ini
[target_servers]
# ëŒ€ìƒ ì„œë²„ IP ë° ì ‘ì† ì •ë³´ (ì‹¤ì œ í™˜ê²½ì— ë§ê²Œ ìˆ˜ì •)
# [ì˜µì…˜ 1] SSH í‚¤ ì¸ì¦ (ê¶Œì¥) - ì´ë¯¸ í‚¤ê°€ ì„¤ì •ëœ ê²½ìš°
Rocky-Target-01 ansible_host=192.168.182.128 ansible_user=audit_2026 ansible_become_pass=qwer1234

# [ì˜µì…˜ 2] ë¹„ë°€ë²ˆí˜¸ ì¸ì¦ (sshpass í•„ìš”) - í‚¤ ì„¤ì •ì´ ì•ˆ ëœ ê²½ìš° ì£¼ì„ í•´ì œ
# Rocky-Target-01 ansible_host=192.168.182.128 ansible_user=audit_2026 ansible_ssh_pass=qwer1234 ansible_become_pass=qwer1234
```

### ì—°ê²° í…ŒìŠ¤íŠ¸
```bash
cd ~/security_project
ansible -i hosts target_servers -m ping
```

---

##  Step 3: ë³´ì•ˆ ì ê²€ ì›Œí¬í”Œë¡œìš°

### 1ë‹¨ê³„: ìµœì´ˆ ë³´ì•ˆ ì§„ë‹¨ (Audit)
Ubuntuì— ìˆëŠ” ì ê²€ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì›ê²© ì„œë²„(Rocky)ì—ì„œ ì§ì ‘ ì‹¤í–‰í•˜ê³ , ê²°ê³¼ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. (`run_audit.yml`)
**[ì‹¤í–‰ ìœ„ì¹˜: ğŸ“‚ `~/security_project` | ğŸ ê°€ìƒí™˜ê²½ ë¶ˆí•„ìš”]**
```bash
# ì „ì²´ ì§„ë‹¨ ì‹¤í–‰
cd ~/security_project
ansible-playbook -i hosts run_audit.yml

# (ì„ íƒ) íŠ¹ì • í•­ëª©ë§Œ ì§„ë‹¨ (ì˜ˆ: U-59)
# ansible-playbook -i hosts run_audit.yml -e "target_id=U59"
```

### 2ë‹¨ê³„: ì·¨ì•½ì  ìë™ ì¡°ì¹˜ (Remediation)
ë°œê²¬ëœ ì·¨ì•½ì ì„ ìë™ìœ¼ë¡œ ìˆ˜ì •í•˜ê³  ë³´ì•ˆ ì„¤ì •ì„ ê°•í™”í•©ë‹ˆë‹¤.
**[ì‹¤í–‰ ìœ„ì¹˜: ğŸ“‚ `~/security_project` | ğŸ ê°€ìƒí™˜ê²½ ë¶ˆí•„ìš”]**
> `run_fix.yml`ì€ **`target_id` ë³€ìˆ˜ê°€ í•„ìˆ˜**ì…ë‹ˆë‹¤! (ë‹¨ì¼ í•­ëª© ì¡°ì¹˜ ì „ìš©)

```bash
cd ~/security_project
# ì˜ˆ: U-59 í•­ëª© ì¡°ì¹˜
ansible-playbook -i hosts run_fix.yml -e "target_id=U59"
```

### 3ë‹¨ê³„: â˜… ê²°ê³¼ í™•ì¸ì„ ìœ„í•œ ì¬ì§„ë‹¨ â˜…
> âš ï¸ **ì´ ê³¼ì •ì„ ìƒëµí•˜ë©´ ëŒ€ì‹œë³´ë“œ ë°ì´í„°ê°€ ê°±ì‹ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤!**
**[ì‹¤í–‰ ìœ„ì¹˜: ğŸ“‚ `~/security_project`]**
```bash
cd ~/security_project
ansible-playbook -i hosts run_audit.yml
```

---

##  Step 4: ëŒ€ì‹œë³´ë“œ ì‹¤í–‰

**[ì‹¤í–‰ ìœ„ì¹˜: ğŸ“‚ `~/security_project` | ğŸ ê°€ìƒí™˜ê²½ í•„ìˆ˜!]**

```bash
cd ~/security_project
# ê°€ìƒí™˜ê²½ í™œì„±í™” (í•„ìˆ˜)
source .venv/bin/activate

# Streamlit ì‹¤í–‰
streamlit run dashboard.py --server.port 8501

# (ì‚¬ìš© ì¢…ë£Œ ì‹œ) ëŒ€ì‹œë³´ë“œ ì¤‘ë‹¨(Ctrl+C) í›„ ê°€ìƒí™˜ê²½ í•´ì œ
deactivate
```

ë¸Œë¼ìš°ì €: `http://localhost:8501`
*ëŒ€ì‹œë³´ë“œì—ì„œ 'ìŠ¹ì¸ í›„ ì¡°ì¹˜' ë²„íŠ¼ í´ë¦­ ì‹œ `run_fix.yml`ì´ ìë™ìœ¼ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.*

---

## ï¿½ ëŒ€ì‹œë³´ë“œê°€ ì½ëŠ” JSON í˜•ì‹

```json
{
    "check_id": "U34",
    "category": "ì„œë¹„ìŠ¤ê´€ë¦¬",
    "title": "Finger ì„œë¹„ìŠ¤ ë¹„í™œì„±í™”",
    "importance": "ìƒ",
    "status": "PASS",
    "evidence": "Finger ì„œë¹„ìŠ¤ê°€ ë¹„í™œì„±í™”ë˜ì–´ ìˆìŒ",
    "guide": "xinetdì—ì„œ finger ì„œë¹„ìŠ¤ë¥¼ disable=yesë¡œ ì„¤ì •í•˜ì„¸ìš”.",
    "check_date": "2026-02-07 20:30:00"
}
```

